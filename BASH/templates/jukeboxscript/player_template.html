<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta charset="UTF-8">
<title>TITLE_TEXT</title>

<style type="text/css">
body, div {
    margin: 0;
    padding: 0;
}
body {
    font-family: "Arial", Helvetica, sans-serif;
    background-color: #000000; 
    color:#c0c0c0; 
    overflow: hidden;
    width: 100%;
    height: 100%;
}
/* Bright links that only underline when tracked */
a:link      { color:#c0c000; text-decoration: none; }
a:visited   { color:#c0c000; text-decoration: none; }
a:hover     { color:#e0e000; text-decoration: underline; }
a:active    { color:#ffff20; text-decoration: none; }
#title {
    width:100%;
    color:#e0e0e0;
    font-size:50px;
    white-space:nowrap;
    text-align:center;
}
.index_entry {
    color:#c0c000;
    font-size:36px;
    white-space:nowrap;
    margin-left:16px;
}
.folder_entry {
    color:#00c0c0;
    font-size:40px;
    white-space:nowrap;
}
.info_text {
  color: #808080;
  font-size: 10px;
}
#PlayerBox {
    overflow: auto;
    text-align:center;
    position: absolute;
    width: 100%;
    height: 100pt;
    background-color:#101010;
    z-index:2;
}
#PlayList {
    overflow: auto;
    position: absolute;
    width: 100%;
    top: 100pt;
    bottom: 0;
    z-index:1;
}
</style>
</head>

<body onload="PlayerInit();">
<div id='PlayerBox'>
<div id="title">Titles Available In TITLE_TEXT</div>
<br/>
<audio id="audioplayer" controls >
    Get a <i>modern</i> browser that supports HTML5 Audio.  If you see this, it doesn't, or it is disabled.<br/><br/>
    <a href="https://www.google.com/intl/en/chrome/browser/">Chrome</a><br/>
    <a href="http://www.apple.com/safari/">Safari</a><br/>
    <a href="http://www.mozilla.org/en-US/firefox/new/">Firefox</a><br/>
    <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">IE, if your Windows version supports a new enough version.</a><br/>
    <a href="https://en.wikipedia.org/wiki/List_of_web_browsers">Others...</a><br/>
    <a href="http://www.w3schools.com/html/html5_audio.asp">More info about compatibility...</a><br/>
</audio>
</div>

<br/>
<div id="PlayList">

<!-- 
    These definitions are sought out in this file, and used to replace the 
    'INDEXES_HERE' with files and folders 
-->

<!-- An audio file -->

<!--INDEX_FILE
<div class="index_entry" path="MEDIA_PATH" style='FILE_STYLE' >
    <a href="" onclick="javascript: PlayMedia(this.parentNode.getAttribute('path')); return false;" >MUSIC_TITLE</a>
</div>
-->

<!-- A folder -->

<!--INDEX_INDEX
<br/><a class="folder_entry" style='FOLDER_STYLE' href="FOLDER_PATH" ><div class="folder_icon"></div>FOLDER_TITLE</a>
-->


<!--INDEXES_HERE-->

<br/>
<div class="info_text"><a href="https://github.com/pingnak/videowebscript">Generated by JukeboxScript</a></div>
</div>

<script type="text/javascript">
var original_title = "Titles Available In TITLE_TEXT";   // Original title, before play list monkeyed with it
var PlayList = document.getElementById("PlayList");;
var now_playing;
var audio_box;
var audio;

function PlayerInit()
{
    audio_box = document.getElementById("PlayerBox");
    audio = document.getElementById("audioplayer");

    var params = window.location.href.split('?');
    if( 2 == params.length )
    {   // If we have '?title.mp3' that's the video in this folder, to play
        PlayMedia(decodeURI(params[1]));
    }
    
}
/* 
 * Load the audio when the page finishes loading 
 * http://www.w3.org/2010/05/audio/mediaevents.html
 */
function PlayMedia(audio_path)
{
    now_playing = audio_path;
    if( 'undefined' == typeof(now_playing) )
    {
        title.innerHTML = original_title;
        return;
    }
    audio.setAttribute("src", now_playing);
    audio.load();
    audio.play();

    // Show title
    var title = document.getElementById("title");
    title.innerHTML = "Now Playing: " + TitleFromPath(now_playing);
}

/** Turn video URI into title text */
function TitleFromPath(path)
{
    var titletext = decodeURI(path);
    titletext = titletext.substring(titletext.lastIndexOf('/')+1);
    titletext = titletext.substring(0,titletext.lastIndexOf('.'));
    return titletext;
}
</script>

</body>
</html>
