<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta charset="UTF-8">
<title>TITLE_TEXT</title>

<style type="text/css">
    body, div {
        margin: 0;
        padding: 0;
    }
    body {
        font-family: "Arial", Helvetica, sans-serif;
        background-color: #000000; 
        color:#c0c0c0; 
        overflow: hidden;
        width: 100%;
        height: 100%;
    }
    /* Bright links that only underline when tracked */
    a:link      { color:#00ffff; text-decoration: none; }
    a:visited   { color:#00ffff; text-decoration: none; }
    a:hover     { color:#00ffff; text-decoration: underline; }
    a:active    { color:#20ffff; text-decoration: none; }
    #title {
        width:100%;
        color:#e0e0e0;
        font-size:50px;
        white-space:nowrap;
        text-align:center;
    }
    .index_entry {
        color:#00ffff;
        font-size:28px;
        white-space:nowrap;
    }
    .folder_entry {
        color:#00c0c0;
        font-size:32px;
        white-space:nowrap;
    }
    .folder_icon {
        display: inline-block;
        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAM1BMVEUAAAD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wC9Wq90AAAAEHRSTlMA758vD9+vP3+/T89fbx+PcBUV9QAAAQpJREFUWMPt10tuhDAQRdECDC7zSd/9rzYDm44jGoGrImXCnTHgCD0hZESenv6kYdXfxaHp/oVDWxPQH4EutADpCDC1Alv8aQHQRiBW16EDSFf1p4AMHXfaTgGZbwF6DojeAVJ+Zz4CEi/q6wf5BFxVPWL3f0BSTUAyAyoyASo9sNqAEZj3CwMQAL4cQAQ6cQAKJA+QN3QAeUM7UDa0A2VDO1A2tANlQztQNjQDr7KhGUhlQzNA2dAFqBeYvUAQEVmB3gaM+RO+j9EOTF5AvUD0AsEJjOIEJi+gXiB6geAExv1IBCwW4H0WBLAA6gWiFwg1kNoaqw0zYGjyAtp2rDy0VL8EQzQU5OndN+fTN/BxvmAlAAAAAElFTkSuQmCC) no-repeat;
        background-size:cover;
        filter: hue-rotate(120deg);
        -webkit-filter: hue-rotate(120deg);
        -moz-filter: hue-rotate(120deg);
        -ms-filter: hue-rotate(120deg);
        -o-filter: hue-rotate(120deg);
        height:32px;
        width:32px;
    }
    .info_text {
      color: #808080;
      font-size: 10px;
    }
    .button_format {
        background: transparent;
        border: none !important;
        font-size:0;    
        /* Grey-scale */
        filter: saturate(0);
        -webkit-filter: saturate(0);
        -moz-filter: saturate(0);
        -ms-filter: saturate(0);
        -o-filter: saturate(0);
    }
    #PlayerBox {
        overflow: auto;
        text-align:center;
        position: absolute;
        width: 100%;
        height: 100pt;
        background-color:#101010;
        z-index:2;
    }
    #PlayList {
        overflow: auto;
        position: absolute;
        width: 100%;
        top: 100pt;
        bottom: 0;
        z-index:1;
    }
</style>
</head>

<body onload="PlayerInit();">
<div id='PlayerBox'>
<div id="title">Titles Available In TITLE_TEXT</div>
<br/>
<button id="bPrev"  class="button_format" type="button" tabindex='-1' title="Previous Track" onclick="javascript: return PlayPrev(); "><img width="32" height="32" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAM1BMVEUAAAD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wC9Wq90AAAAEHRSTlMAn1/P7w8fv38/30+vL2+PSCbmlAAAAVNJREFUWMPtltmygyAMQBFkE6j8/9deFXBpCUvudKYP5K2NOZo9hAwZMuQbojcReHM6+10srz0oXPZvznyQqWIuvTc5RbL3XhfM+Qq9w+yKmVU+4RXclBmVCpYKUIcgL/EbIYDanoEBu/P/AATnNy8tDhBz7CehMQAdUyQ1/IoCQNhgvtAD1gvgKkZOhRLtBSTnbWqSPkBynl3V2QMQU0wdvQe0GcDV/HC+F0CXN+f7ADrW7fLRmk2A0/lXpqPqALZG59fccGoApJbLj8dmwKwIFiBTAA0WQExMoXRIwPYz9T9HAgiHMtleyi5fSz3NdIZCIAFXKG4l1TlQPou6e6S9txViqD4bGzPWH6MFtRfuw00jV9s5XlUZYODlmgY8tPyODjascB+cKyYL4BefwueNhQHhRDkSXjzkGAhI5wtz9WPO5FVuklKq6pXHtRsn9ZAfkz8Vlyzt5B2tZgAAAABJRU5ErkJggg==" /></button>
&nbsp;
<audio id="audioplayer" controls >
    Get a <i>modern</i> browser that supports HTML5 Audio.  If you see this, it doesn't, or it is disabled.<br/><br/>
    <a href="https://www.google.com/intl/en/chrome/browser/">Chrome</a><br/>
    <a href="http://www.apple.com/safari/">Safari</a><br/>
    <a href="http://www.mozilla.org/en-US/firefox/new/">Firefox</a><br/>
    <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">IE, if your Windows version supports a new enough version.</a><br/>
    <a href="https://en.wikipedia.org/wiki/List_of_web_browsers">Others...</a><br/>
    <a href="http://www.w3schools.com/html/html5_audio.asp">More info about compatibility...</a><br/>
</audio>
&nbsp;
<button id="bSeq"  class="button_format" type="button" tabindex='-1' title="Sequential" onclick="javascript: return PlayListRandom(); "><img width="32" height="32" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAM1BMVEUAAAD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wC9Wq90AAAAEHRSTlMAD9+f7y/Pfz+/H19vj0+veCxEAAAAAOZJREFUWMPtlkkOgzAMRclAJobm/qetAzFDV9hGrVTyNwak94iixHLXtfx7Zl8zBhav856BwfcHPkeGINwh0GUHjEAQTw/UlKXfIhigGonAQ/UPFZSjnCSCCGBogkVgmP1gE2AlB5feBL8UjABOEgH2QrHAQlUSATaWJwoUgFYiQLIJllHH8QTrGWaPB3iLOILw2qarVWBjyXT5Trr8IaixiT5i9qd5sSc0s31C3d/05U0wy4LxfyrM9vSBbnBUvu5jRTj8EWLxG5a4PBpc4vJoyGweDFrGw022Mr4aBDwYXHYS/gt5AyyXH4pjNidaAAAAAElFTkSuQmCC" /></button>
<button id="bRand" class="button_format" type="button" tabindex='-1' title="Shuffled"   onclick="javascript: return PlayListSequential(); "><img width="32" height="32" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAM1BMVEUAAAD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wC9Wq90AAAAEHRSTlMAD6/fv59ff+8/H0+Pzy9vOwKkCwAAAc1JREFUGBm1wQlu2zAAAMElxVPn/v+1teWkqdEUkBh0hv/jaH5nKlzU/F7jIv+Fi1T+pnKRT63yMNfU/I2LfNkJyTdcFH3a2DffZC7L2sLctK3LzH1BXdi07Qw5dGLRtjMm6krWlUGTdpJ2BqmBpJ1BKiQtDGo6s+rGoKiVWd06Q4q2QPYh1mPnvk2nhdU/tMoNc1Pz3OPmF+7ozYcK8xGTL9xRPfGbynUheooQej/qg8p1WU2lLyVOfuGyohZYfdO4LGmF7Cnlejp2rtq1warmY2bAqpmuVsZMupM1MSaoMGlnTNcNVAZ1TaAyqGsCNTCm6wSbLgxSZ7ImBk1aWNQ1MCTrFEhqKzMDZjUTok8tpVSflsBlUa3Qm2+mg4vCpKaZUGLzTxsX7c2HrQfoD/UpN22Bi+bkKR5959OqhcvK5JsYOLRyw15y88tB18hNpabNl0TXxKCuia6J27KmtVSNLLpym58qVSu3bX5YyJqOzk1Fram5BaKnFLgjqIXT0jwt3JI18jIvq9oCtyzqzIekbeemSQ9esradu1adOGW1c9us7jxktTBg0wxktTCiaIOsFoYEtRxqYVDWSS2MWnxaGTepmR+omvmR3vneL9LSKivqIfJ0AAAAAElFTkSuQmCC" /></button>
&nbsp;
<button id="bNext" class="button_format" type="button" tabindex='-1' title="Next Video" onclick="javascript: PlayNext(); return false;"><img width="32" height="32" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAM1BMVEUAAAD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wD//wC9Wq90AAAAEHRSTlMA31+f7w8ffz+/ry+Pb89P5cCn5AAAAUZJREFUWMPtlrmahCAQhAu5Ghy13v9pNxB0DtGhN9gNrMSAj1+6+gDg1q1bfyQREd9YCzJebR8MSbrH4eLoaORiP4sOCRNJpnCy37sK4NFZY4H78wOYNDeOUAB0UwsQSZr1k04AbFoRSUZATgDJrIhjK74ARB+LUdHrAECwxYpBCQAkrYhZlABgKHHkoATA15S8WNEBAEL+tKILAMhcUipKwG6FDUrAZoVbregHAKGk1AxKACBms0IHAKZqRVYC4B9bo+oAWMyvAGM10qoAvnZn1JlY54P1qjRuORxVhbRV0aIq5Zo8F3XNND0FrwA8FbBmHry0UD/grYm7Ae9jpBPwOci6ADY3b5XvAGzfa/UXwHIFyK1HxkDSDZJJ5jZgbj9zwn7GqQU4Dr7Kbi+IoxjHdvD7mHeNDK8ECbjSmFPKC27d+mf6AUwkLKIyJCOKAAAAAElFTkSuQmCC" /></button>
</div>

<br/>
<div id="PlayList">

<!-- 
    These definitions are sought out in this file, and used to replace the 
    'INDEXES_HERE' with files and folders 
-->

<!-- An audio file -->

<!--INDEX_FILE
<div class="index_entry" path="MEDIA_PATH" style='FILE_STYLE' >
    <a href="" onclick="javascript: PlayMedia(this.parentNode.getAttribute('path')); return false;" >MUSIC_TITLE</a>
</div>
-->

<!-- A folder -->

<!--INDEX_INDEX
<br/><a class="folder_entry" style='FOLDER_STYLE' href="FOLDER_PATH" ><div class="folder_icon"></div>FOLDER_TITLE</a>
-->


<!--INDEXES_HERE-->

<br/>
<div class="info_text"><a href="https://github.com/pingnak/videowebscript">Generated by JukeboxScript</a></div>
</div>

<script type="text/javascript">
var original_title = "Titles Available In TITLE_TEXT";   // Original title, before play list monkeyed with it
var bShuffle = false;
var now_playing = null;
var playlist = null;
var PlayList = document.getElementById("PlayList");;
var audio_box;
var audio;
var bRand = document.getElementById("bRand");
var bSeq = document.getElementById("bSeq");

function PlayListRandom()
{
    MakePlaylist(); 
    PlayMedia();
    bRand.style.display ='';
    bSeq.style.display ='none';
    return false;
}
function PlayListSequential()
{
    PlayListShuffle(); 
    PlayMedia();
    bRand.style.display = 'none';
    bSeq.style.display  = '';
    return false;
}

function PlayerInit()
{
    audio_box = document.getElementById("PlayerBox");
    audio = document.getElementById("audioplayer");

    MakePlaylist(); 
    bRand.style.display ='none';
    bSeq.style.display ='';
    
    if( 0 == playlist.length )
    {
        audio_box.style.display = 'none';
        PlayList.style.top = '0px';
    }

    var params = window.location.href.split('?');
    if( 2 == params.length )
    {   // If we have '?title.mp3' that's the video in this folder, to play
        PlayMedia(decodeURI(params[1]));
    }
}
/* 
 * Load the audio when the page finishes loading 
 * http://www.w3.org/2010/05/audio/mediaevents.html
 */
function PlayMedia(audio_path)
{
    if(typeof(audio_path)==='undefined') 
        audio_path = playlist[0].getAttribute('path');
    now_playing = audio_path;
    if( 'undefined' == typeof(now_playing) )
    {
        title.innerHTML = original_title;
        return;
    }
    audio.setAttribute("src", now_playing);
    audio.load();
    audio.play();
    audio.addEventListener( "ended", PlayNextWrap ); // Re-shuffle
    // Show title
    var title = document.getElementById("title");
    title.innerHTML = "Now Playing: " + TitleFromPath(now_playing);
}

/* Make a play list from title links */
function MakePlaylist()
{
    var collection = document.getElementsByClassName("index_entry");
    var array = new Array();
    var i;
    for( i = 0; i < collection.length; ++i )
    {
        array.push(collection[i]);
    }
    bShuffle = false; 
    return playlist = array;
}
/* Shuffle a play list */
function PlayListShuffle()
{
    ArrayShuffle(playlist);
    ArrayShuffle(playlist);
    ArrayShuffle(playlist);
    bShuffle = true; 
    return playlist;
}
/**
 * Shuffle an array
 * @param array Array to shuffle in-place
 * @return Array passed in
**/
function ArrayShuffle(array)
{
    var ri;
    var tmp;
    var i = array.length;
    while( i-- )
    {
        ri = Math.floor(Math.random() * array.length);
        tmp = array[i];
        array[i] = array[ri];
        array[ri] = tmp;
    }
    return array;
}
/* Get index of currently playing media */
function indexPlaying()
{
    var i = playlist.length;
    while( 0 <= --i )
    {
        if( playlist[i].getAttribute('path') == now_playing )
            return i;
    }
    return -1;
}
/* Play the previous one */
function PlayPrev()
{
    var i = indexPlaying() - 1;
    if( i < 0 )
    {
        i = playlist.length-1;
    }
    PlayMedia(playlist[i].getAttribute('path'));
    return false;
}
/* Play the next one */
function PlayNext()
{
    var i = indexPlaying() + 1;
    if( i >= playlist.length )
    {
        i = 0;
    }
    PlayMedia(playlist[i].getAttribute('path'));
    return false;
}
/* Play the next one, re-shuffle if play list hits the end on its own */
function PlayNextWrap()
{
    var i = indexPlaying() + 1;
    if( i >= playlist.length )
    {
        i = 0;
        if( bShuffle )
        {
            PlayListShuffle();
        }
    }
    PlayMedia(playlist[i].getAttribute('path'));
}
/** Turn video URI into title text */
function TitleFromPath(path)
{
    var titletext = decodeURI(path);
    titletext = titletext.substring(titletext.lastIndexOf('/')+1);
    titletext = titletext.substring(0,titletext.lastIndexOf('.'));
    return titletext;
}
</script>

</body>
</html>
