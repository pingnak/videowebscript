<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta charset="UTF-8">
<style type="text/css">
body {
    font-family: "Arial", Helvetica, sans-serif;
    background-color: #000000; 
    color:#ffffff; 
}
/* Bright links that only underline when tracked */
a:link      { color:#00ffff; text-decoration: none; }
a:visited   { color:#00ffff; text-decoration: none; }
a:hover     { color:#00ffff; text-decoration: underline; }
a:active    { color:#20ffff; text-decoration: none; }
.title {
    width:100%;
    color:#e0e0e0;
    font-size:50px;
    white-space:nowrap;
    text-align:center;
}
#PlayerBox {
    text-align:center;
}
#videoplayer {
    width:75%;
}
.index_entry {
    color:#00ffff;
    font-size:28px;
    white-space:nowrap;
}
img.index_thumbnail {
    width:THUMB_SIZEpx;
    vertical-align:middle;
    padding-bottom:8px;
    padding-right:8px;
}
.folder_entry {
    color:#00c0c0;
    font-size:32px;
    white-space:nowrap;
}
img.folder  {
    content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACTUExURQAAAFrW/23b/1S7/2fO/2LL/0rn/2XO/2PO/0jp/2bM/0iv/1rB/0br/2TT/1XO/03C/1HG/17E/2XN/2HR/0no/0br/0Ts/1e9/1jZ/0vm/0Pu/1W8/060/0Oq/2HI/0Gn/2bM/1i//zP//z/y/0y//zOZ/zn4/0yz/zT9/zb7/z+m/0Lv/zqh/zSa/zmf/z2k/1D7ZHAAAAAjdFJOUwB3B78vJ98/H98P32/nF7fv119HX+fv949/3++vz+9P9zd/9Jz7BQAAAJtJREFUOMvN0skOgjAUheEKxRbEeR5Ri6U4wfs/ndLEpJW0Z2Xiv/4Wze0h5PexT5EL3AvdcuYCudCV8yn/KrGAuC5iu27HBq2KNQDiopRKvUDK4wmAHgcg9L9BVmcA6gyAAwVgn/jBcwcO9UgBuDEA3mfyg7D5LLp1g1UDeOwGEwBGFIDxwA/KoV4U3+RG/fYmA2YWmasOyJ/0As+xUtPOgUqZAAAAAElFTkSuQmCC);
    height:32px;
    width:32px;
}
.info_text {
  color: #808080;
  font-size: 10px;
}
.center {
    text-align:center;
    margin: auto;
    width:50%;
}
.button_format {
    background: transparent;
    border: none !important;
    font-size:0;    
}
</style>
<title>TITLE_TEXT</title>
</head>

<body onload="PlayerInit();">
<div id='PlayerBox' style="display:none;">
<video id="videoplayer" controls >
    Get a <i>modern</i> browser that supports HTML5 Video.  If you see this, it doesn't, or it is disabled.<br/><br/>
    <a href="https://www.google.com/intl/en/chrome/browser/">Chrome</a><br/>
    <a href="http://www.apple.com/safari/">Safari</a><br/>
    <a href="http://www.mozilla.org/en-US/firefox/new/">Firefox</a><br/>
    <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">IE, if your Windows version supports a new enough version.</a><br/>
    <a href="https://en.wikipedia.org/wiki/List_of_web_browsers">Others...</a><br/>
    <a href="http://www.w3schools.com/html/html5_video.asp">More info about compatibility...</a><br/>
</video>
<br/>
</div>
<!-- Put this in above div, to make it show/hide these controls with the player
TODO: Make sequential/shuffle buttons 'mode' radio buttons, and don't trigger playback just for picking them
-->
<div id="video_controls" class="center">
<button class="button_format" type="button" alt="Prev" onclick="javascript: playPrev(); return false;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADAUExURQAAAP///////////////////////////////////////////////////////////8zMzAD//////wAAADMzMwA/P/Ly8pmZmQC/v9LS0vv7+9/f3+/v79XV1YyMjPX19WZmZgAfH7+/vxkZGdvb23JycgAPDwBfX0xMTAwMDADPz6WlpQCvr8/Pz+Li4gDv7wB/fwAvL+jo6OXl5djY2LKysgCfnyYmJj8/PwDf3+vr6wBvb1lZWcXFxfj4+H9/f7UhKSAAAAAQdFJOUwCfjx8Pf1+/32/PPy9Pr+896aFUAAABc0lEQVQ4y3WTZ2OCMBCGwxBx1eQugoIMB1rrqlbtbv//v2qIKGH0/XpPcus9QnIZVkPKMkiNzJYNd9ktsxwX4fEuoFLBzgHbKoS7bTiOqKLRGB6UT4x+dKIlzb12nr79s6UVBaDdgAcvOCexWyZ8aFzjPfATRHwthtf86wU6MkF/TPmEXVD9YvqIyGlkywZhRPmADVUgXuHywOkJ0mZth5aAcIaDJzbglEaiky74RWDNcbJhTAI+GCLDVgVE8sUzYxkwghbRPKoAafI9uwPU00nTyYFrcqYATlMBwiz5v8AvKu/rAFfUj5/7MqCrRYoiFhdWLLLY5jRGPAwLbZYHdX5DXL4rgyL2uDRqdyZnlQJOuq1GdVnJCidDAQRyWdm6N+o2022LdcsPCLFgHlYM43LkmWGk5cI4KTvO/b5ZTpjW86umPeamJaYGFeJDjECRBlHxcCIonhbpidOb349GnF6n9ngdKXG8lll34D29KaWrr/8Ae+A+0L8GxsYAAAAASUVORK5CYII=" /></button>
<button class="button_format" type="button" alt="Next" onclick="javascript: playNext(); return false;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAC9UExURQAAAP///////////////////////////////////////////////////////////8zMzAD//wAAAP///5mZmQC/v/Ly8jMzMwA/P2ZmZtLS0t/f3/v7++/v77+/v9XV1QAfH/X19RkZGQwMDKWlpYyMjAB/f9vb20xMTADv78/Pz7KysgCvr9jY2AAPD+Li4gDPz+jo6ABfXyYmJgBvbwCfn1lZWX9/fwDf3wBPT+vr6/j4+Li4uOXl5XJyco9W9xIAAAAQdFJOUwCfzx9vf1+/3w+PPy9Pr+/Q7HwkAAABeElEQVQ4y32T6XaCMBCFgygCbkkGQXawuGutVbu37/9YDQEkAY/3H2c+JrNdhGqpWo9LU9EdGV0dbtK7RjPOwuExxlzx0QZdk8LDDpw8LMgLYSwkUSfpATe0Cjr1853vLW4pBqUCxkHcjEau6/5Ar4iPwM/mrgzsKKXzAwz4A5MQW+xzIQLrhFypleq8QfAYcEmok9WAMyNTah0gb1a3MQOmZPlM15EM4JR1MgS/AMjmlT65MuCDyl7YlgAhL7OqlBLwoIuUAN8AQvZlKSWAAxP1bREgZSkVYPdbAC9l8QjIc7gPgGmS9yIAplTkxyfl0xCKFNvcLCk9W40260GRK8v+3hoU0sMCYFOib5E8STvfVo8va3+h1Nk1lhXzZZXrlvftJGRPLZ4AIQ1WGWstEu9hwf44/xYHw0/O2jVuLnP//Ork2NEGfvtoT/XRIkOBFvHFRiBIgVQ2TgqytdCIWW91Mw2z3uCueW0uZl7NuGfwkdnnMsW//wFrXD86ZgGCVAAAAABJRU5ErkJggg==" /></button>
&nbsp;&nbsp;
<button class="button_format" type="button" alt="Sequential" onclick="javascript: MakePlaylist(); playmedia(); return false;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACuUExURQAAAP///////////////////////////////////////////////////////////8zMzP///wAAAAD///Ly8gA/PzMzM2ZmZt/f39LS0vv7+9XV1e/v75mZmQB/f/X19UxMTAC/v9vb26WlpQBfX8/Pz7+/v39/f+Xl5ejo6NjY2OLi4rKysgCPj3JycgDv7wwMDADf3wAfHxkZGevr6/j4+FlZWSYmJgAPDwAvL5MjQvkAAAAQdFJOUwCfzx9vf1/fvw+PP6/vL0+FEI3DAAABYUlEQVQ4y72TaYOCIBCGMUvTDhmwQ8vUstrua8///8cW8ABc/brvF8F5YGaYGYSkTKsnZJmoQU7Xhkp216nbmXl5WmChxckH29LM4w4cAmaKZkxXtgiWMFQuMUfxUZy9Ey6xXIcd6b7zsc0vJytKV6RwBEYJDMPCuQbgOfRyuwfz4hd+ZQqA32AgHIyW5R88nagAjm2RIAQaMJlW2yPwZG0ftwE4ZpmMZQR/gTmYzMO2HQigi4wQtwM4dFFfCQHPSA3w+/8BuGENeCZ6kFqaHCAzPU3tofbkoQH8oZAta4UjkmqAz6vVq4p1jq4cSKLoXPaMpZZ7x9stpU/+2cgLELJgnRMJuaSU3tKMJGrDyJbbfX0/KKWXwl61HGvaMM9k9/q50Yx8is1BNi1yjCLXzX2Skb1YvrMnUGRAHOR55vYgBn20kMdGj8e64fGv2egNGofXF2LDazlNA+65fSFXPf0LCF47HQmY30UAAAAASUVORK5CYII=" /></button>
<button class="button_format" type="button" alt="Shuffle" onclick="javascript: PlayListShuffle(); playmedia(); return false;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABRFBMVEUAAAD////////////////////////////////////////////////////////////MzMwAAAD///8A///y8vLf39/7+/vS0tLv7+/V1dUA8vL19fXb29vPz89UVFQEBAQA/PwAycnl5eXY2Njo6OgsLCwAm5sAr68Anp4AAQEAyMgACgoAfn4AzMwA8fEAk5MAIyMA29sA+fni4uLr6+v4+Ph8fHwAKioAQkIAMjIAd3cACAgABgYAsrIAgYEANTUArq4AY2MAvb0AiIgAICAAGhoAU1MAkpIAPDwA6+sAwMAAVFQAt7cAc3MA9fUAsbEAn58AiooA09MABQUA5uakpKQAS0sALCwAnZ0A/v4AcnIA7OwAJSUAhYUANjYA+/sAAgIAFBQA0dEAR0cAs7MANDQA8PAAeHgAgoIACQkAysoA9/du9SaZAAAAEHRSTlMAn8+Pb19/v98PHz+v708v4R2/qgAAAaxJREFUOMt9U1d7wjAMNCMQaEstKwm00ALde++999577/7/9zomdpx8fL03R5eTToMQH2kjIWCkSRWk4iZTMOOpcJyHc6MNVKBh1GKmEQjXR1lbEXzQbI7VaiLpunwrhfdGDx/AZQpO1E8fHW+iFC7L5V8cGf4p94BIxCKSUOu4ydsBPvHru5LChc0SlXiG2eIDbOGbF6ughdWIBHW5yhs2sU+PU5o3hUGW9Qgd2AnQrBFamWvWtLwnPIzg/Z1bQlFJcCf1XgWUFmHo6hFvd1amVSKbpXmGJqnwdNN/jaVSaUoRsixOIo6MwyG+vPb6Nl04MZJUJVzg2TMEbVArqRGOsQvO6T+EIxwM/R8i7OPJabAPghBTRa4N4N7uUHe4SGWzGTYOEHFguH91DjSbfqMA1gd7tjkHF0BrFDFzUm/CVe/u7cMlSbDcaSXksKTQIrfrLacYlhq3JCzjDGgChBisECDM4yToCyNXTmK2swPaAyvHl9axNQWvD23+0pJUhNnhJo/xFmiIsHzASzbPgqdFMvz0VK0Ffno1VY/XEuDHa6SqHXgmlhSI6X//AbVCRfQd9miAAAAAAElFTkSuQmCC" /></button>
</div>
<div id="title" class="title">Titles Available In TITLE_TEXT</div>
<br/>
<script type="text/javascript">
var original_title = "Titles Available In TITLE_TEXT";   // Original title, before play list monkeyed with it
var bShuffle = false;
var playlist;
var now_playing = null;
var video_box;
var video;
var video_controls;

/**
 * Set things up, when the page loads
**/
function PlayerInit()
{
    video_box = document.getElementById("PlayerBox");
    video = document.getElementById("videoplayer");
    video_controls = document.getElementById("video_controls");
    MakePlaylist();
    video_box.style.display = 'none';
    video_controls.style.display = 0 == playlist.length ? 'none' : '';
    var params = window.location.href.split('?');
    
    if( 2 == params.length )
    {   // If we have '?title.mp4' that's the video in this folder, to play
        playmedia(decodeURI(params[1]));
    }
    
    // If we have a parent, show a 'back' link to it
    // Note: This will only work with pages served from a web server.
    // If you open it from the file system, it will remain hidden, and get an 
    // error in the page's log output about needing to be 'same domain'.
    var request = new XMLHttpRequest();  
    request.open('GET', '../VideoPlayer.html', true);
    request.onreadystatechange = function()
    {
        if (request.readyState === 4)
        {
            if (request.status === 200) 
            {   // If a parent html page exists, display a link to it
                document.getElementById("ToParent").style.display = '';
            }  
        }
    };
    request.send();

}

/* 
 * Play a video 
 * http://www.w3.org/2010/05/video/mediaevents.html
 */
function playmedia(video_path)
{
    if(typeof(video_path)==='undefined')
    {
        video_path = playlist[0].getAttribute('path');
    }
    now_playing = video_path;
    if( 'undefined' == typeof(now_playing) )
    {
        title.innerHTML = original_title;
        video_box.style.display = 'none';
        return;
    }
    video_box.style.display = '';

    var video_type='video/'+now_playing.split('.').pop();
    video.setAttribute("src",now_playing);
    video.setAttribute("type",video_type);
    video.load();
    video.play();
    video.addEventListener( "ended", playNext );
    
    // Show title
    var titletext = decodeURI(now_playing);
    titletext = titletext.split('/').pop();
    titletext = titletext.split('.').shift();
    title.innerHTML = titletext;
    
    // Show video
    window.scrollTo(0,0);
}

// Make a play list from title links
function MakePlaylist()
{
    var collection = document.getElementsByClassName("index_entry");
    var array = new Array();
    var i;
    for( i = 0; i < collection.length; ++i )
    {
        array.push(collection[i]);
    }
    bShuffle = false;
    // Hide extra controls, if nothing in play list
    return playlist = array;
}
// Shuffle a play list
function PlayListShuffle()
{
    ArrayShuffle(playlist);
    ArrayShuffle(playlist);
    ArrayShuffle(playlist);
    bShuffle = true; 
    return playlist;
}
/**
 * Shuffle an array
 * @param array Array to shuffle in-place
 * @return Array passed in
**/
function ArrayShuffle(array)
{
    var ri;
    var tmp;
    var i = array.length;
    while( i-- )
    {
        ri = Math.floor(Math.random() * array.length);
        tmp = array[i];
        array[i] = array[ri];
        array[ri] = tmp;
    }
    return array;
}
// Get index of currently playing media
function indexPlaying()
{
    var i = playlist.length;
    while( 0 <= --i )
    {
        if( playlist[i].getAttribute('path') == now_playing )
            return i;
    }
    return -1;
}
// Play the previous one
function playPrev()
{
    var i = indexPlaying() - 1;
    if( i < 0 )
    {
        i = playlist.length-1;
    }
    playmedia(playlist[i].getAttribute('path'));
    return;
}
// Play the next one
function playNext()
{
    var i = indexPlaying() + 1;
    if( i >= playlist.length )
    {
        i = 0;
    }
    playmedia(playlist[i].getAttribute('path'));
}
// Play the next one, re-shuffle if play list hits the end on its own
function playNextWrap()
{
    var i = indexPlaying() + 1;
    if( i >= playlist.length )
    {
        i = 0;
        if( bShuffle )
        {
            PlayListShuffle();
        }
    }
    playmedia(playlist[i].getAttribute('path'));
}
</script>

<div id="playlist">
<br/><a class="folder_entry" id="ToParent" style='display:none;' href="../VideoPlayer.html" ><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAY1BMVEUAAAAyMjIwMDAzMzMxMTEyMjIyMjIzMzMzMzMxMTEyMjIzMzMzMzMyMjIzMzMxMTEA//8zMzMvPz8mZmYZmZkJ2NgMzMwWpaUG5eUD8vIpWVkcjIwff38jcnIPv78sTEwTsrJf4MiOAAAAEHRSTlMA30/PH3/vvw8/j2+vn18v411MkwAAAPZJREFUOMvNktmWgyAQREVFlMRMF+Ca9f+/clhmARPM25ypR7gU3V1dFH+trtu9biWwd18y7AH1ETif88ChwTqQyQEfAmoiIi1eF8cBPVMW6BjUjbx0VT8/721xS7inC9AIXrbx8wb3kb61jOZ6t832v0ZHqJlSLUaB/ZjUX/WnyKSqNp6A3prQEBORycP+HzpKCG8yuGMDzhmMJyDjIAT8sRt1LXEJcJlE6bOY4HwPePipsXRgNk0zwm9MD/fhiNNmHxqoABTs6izWajt1axIACQdMeEqm5KE3DjeZeftHlBB8Pkq+ATL744FVW6ks0IogXvwHfQIK/RVvGadqVwAAAABJRU5ErkJggg==" /></a>

<!--INDEXES_HERE-->

</div>
<br/>
<div class="info_text">
    <a href="https://code.google.com/p/videowebscript/">Generated by VideoWebScript</a>
</div>
</body>
</html>
